<!DOCTYPE html>
<html lang="sk">
<head>
    <meta charset="UTF-8">
    <title>MatQUIZ - Moje kvízy</title>
    <link href='https://fonts.googleapis.com/css?family=Raleway' rel='stylesheet'>
    <style>

         .listkvizov{
          overflow-y: scroll;
          position: fixed;
          top: 70px;
          left: 20%;
          width: 80%;
          height: 80%;
          padding : 10px, 10px;
          font-family: Raleway;
        }
                .listkvizov a {
          float: left;
          display: block;
          background: #FFBE58;
          color: black;
          text-align: center;
          padding: 10px 10px;
          text-decoration: none;
          font-size: 15px;
          font-family: Raleway;
        }

        .listkvizov a:hover {
          background: #f1f1f1;
          color: black;
        }

        /* Customize the label (the container) */
.container {
  display: block;
  position: relative;
  padding-left: 35px;
  margin-bottom: 12px;
  cursor: pointer;
  font-size: 22px;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  font-family: Raleway;
}

/* Hide the browser's default radio button */
.container input {
  position: absolute;
  opacity: 0;
  cursor: pointer;
  height: 0;
  width: 0;
}

/* Create a custom radio button */
.checkmark {
  position: absolute;
  top: 0;
  left: 0;
  height: 25px;
  width: 25px;
  background-color: #eee;
  border-radius: 50%;

}

/* On mouse-over, add a grey background color */
.container:hover input ~ .checkmark {
  background-color: #ccc;
}

/* When the radio button is checked, add a blue background */
.container input:checked ~ .checkmark {
  background-color: #FFBE58;
}

/* Create the indicator (the dot/circle - hidden when not checked) */
.checkmark:after {
  content: "";
  position: absolute;
  display: none;
}

/* Show the indicator (dot/circle) when checked */
.container input:checked ~ .checkmark:after {
  display: block;
}

/* Style the indicator (dot/circle) */
.container .checkmark:after {
  top: 9px;
  left: 9px;
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: white;

}


    </style>

</head>
<body>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
<script type="text/javascript">

var kvizy;

$(document).ready(function(){
    nacitaj();
});

function noChecked(){
    alert("Nezvolil si žiaden kvíz");
}


function vypis(){
    var i, kluc;
    var len = Object.keys(kvizy).length
    var ele = document.getElementById('formRB1');
    var kluce = Object.keys(kvizy)
    var ele = document.getElementById('formRB1');

    for(i=0; i<len; i++){
        kluc = kluce[i];
        ele.innerHTML += '<label class="container">'+kvizy[kluc][0]+' - '+kvizy[kluc][1]+' - '+kvizy[kluc][2]+' - '+kvizy[kluc][3]+'<input type="radio" name="radio" id="'+kluc+'" class="radio"><span class="checkmark"></span></label>';
    }
}
function nacitaj(){
    kvizy = $.ajax({
        type:"GET",
        url: "/kviz_req4",
        async: false,
        dataType: 'json',
        data:{},
        success: function( data ){
            //$('#test1').text(JSON.stringify(data))
        }
    }).responseJSON

    vypis();
}

function uncheck(){
    $('input:checked').removeAttr('checked');
    $(':a').prop('disabled', true); //TODO skontrolovat spravnost, nastavit farbu
}

function vymaz(){
    var tmp = document.querySelector('input[type=radio]:checked'); // FUNGUJE!
    if (tmp == null) noChecked();

    $.ajax({
        type:"GET",
        url: "/kviz_req5",
        async: false,
        data:{
            'kviz_id' : tmp.id
            },
    });
    location.reload();
}

function edit(){
    var tmp = document.querySelector('input[type=radio]:checked'); // FUNGUJE!
    if (tmp == null) noChecked();

    window.location.replace("/edituj_kviz?kviz_id="+tmp.id);
}

function hraj(){
    var tmp = document.querySelector('input[type=radio]:checked'); // FUNGUJE!
    if (tmp == null) noChecked();

    window.location.replace("/kviz?kviz_id="+tmp.id);
}

</script>


{% include 'MenuBar.html' %}
<div class="topheader">
        <style scoped>
        {% include 'styles/TopHeader_style.css' %}
    </style>
    <p1>MOJE KVÍZY</p1>
</div>

<div class="listkvizov">
<!--    Ahoj!-->
    <p id="test1"></p>
    <form id="formRB1" name ="nazov_kvizu" action=""></form>
</div>

<div class="actionbar">
    <style scoped>
        {% include 'styles/ActionBar_style.css' %}
    </style>

    <a class="actionbutton" onclick="hraj()">Spustiť kvíz</a>
    <a class="actionbutton" onclick="edit()">Editovať</a>
    <a class="actionbutton" onclick="vymaz()">Odstraniť kvíz</a>
    <a class="actionbutton" onclick="" href="\vytvor_kviz">Vytvoriť nový kvíz</a>
    <a class="actionbutton" onclick="uncheck()">Odznačiť</a>
</div>


</body>
</html>